<!doctype html><html lang=en>
<head>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1">
<title>Shadowsocks - weeeblog</title>
<meta name=description content="Shadowsocks! Sounds like the new superhero after Deadpool. Well, in a way it is a superhero! It let’s you bypass censorship, even the GFW! 1 Okay, so what’s this fuss about? Before going further, I think it needs some introduction.
Shadowsocks is a SOCKS5 compatible proxy server/client suite which excels at being undetectable. It leaves no fingerprint even when you use deep packet inspection. 2
Whoa! Wait, What does that mean?"><link rel=icon type=image/svg href=/static/favicon.png>
<link rel=stylesheet href=/main.css>
<link rel=canonical href=https://nikhilweee.me/blog/2016/shadowsocks/>
<link href=https://cdn.jsdelivr.net/npm/charter-webfont/charter.min.css rel=stylesheet>
<link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css>
</head>
<body>
<header class=site-header>
<div class=wrapper>
<a class=site-title href=/blog>weeeblog</a>
<nav class=site-nav>
<button id=theme-toggle accesskey=t title="(Alt + T)" class=page-link><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
</button>
<a class=page-link href=/blog/archives/>Archives</a>
<a class=page-link href=/>About</a>
</nav>
</div>
</header>
<main class=page-content>
<div class=wrapper>
<article class=post itemscope itemtype=http://schema.org/BlogPosting>
<header class=post-header>
<h1 class=post-title itemprop="name headline">Shadowsocks</h1>
<h2 class=post-subtitle itemprop="abstract description">Dont let your ISP block you</h2>
<p class=post-meta>
<time datetime="2016-09-12 00:00:00 +0000 UTC" itemprop=datePublished>Sep 12, 2016</time>
• <span itemprop=author itemscope itemtype=http://schema.org/Person>
<a href=/><span itemprop=name>Nikhil Verma</span></a></span>
•
<a href=/blog/categories/tutorials/>Tutorials</a>
</p>
</header>
<div class=post-content itemprop=articleBody>
<p><a href=https://shadowsocks.org/>Shadowsocks</a>! Sounds like the new superhero after <em>Deadpool</em>. Well, in a way it <em>is</em> a superhero! It let&rsquo;s you bypass censorship, even the GFW! <sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup> Okay, so what&rsquo;s this fuss about? Before going further, I think it needs some introduction.</p>
<blockquote>
<p>Shadowsocks is a SOCKS5 compatible proxy server/client suite which excels at being undetectable. It leaves no fingerprint even when you use deep packet inspection. <sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup></p>
</blockquote>
<p>Whoa! Wait, What does that mean? In simple terms, this means that shadowsocks lets you access blocked resources and is hard to detect by even the best firewalls.</p>
<p><em>Seems Interesting. I would definitely want one!</em><br>
Okay, but before moving further, it&rsquo;s important to know how this stuff works.</p>
<h3 id=working>Working</h3>
<p>Shadowsocks is some software that has to be set up individually on two systems. One is your device, or the <em>client</em>, which wants to bypass firewalls, and the other is a <em>server</em> - quite simply a device which has unrestricted access to the internet.<br>
The client then connects to the server (which isn&rsquo;t blocked by the firewall), and tunnels all its traffic through the server via shadowsocks. The firewall thinks this is legitimate traffic, and so doesn&rsquo;t block you.</p>
<figure><img src=/static/shadowsocks/arch.svg alt="The Big Picture."><figcaption>
<p>The Big Picture.</p>
</figcaption>
</figure>
<h3 id=why-shadowsocks>Why Shadowsocks</h3>
<p>Now you might think that if the client is already allowed to connect to the server, then why do we need shadowsocks in the first place?
There are a couple of reasons why I recommend shadowsocks.</p>
<ul>
<li>
<p>One, although you may have unrestricted access to the server, the firewall can still find out whether you&rsquo;re using it to tunnel blocked resources. Shadowsocks excels at deceiving. It fools the firewall into believing that your communication is legitimate. Also, it&rsquo;s fast. Trust me. You&rsquo;re not limited by some crappy VPN that only lets through a few kilobits per second.</p>
</li>
<li>
<p>Two, an interesting advantage with shadowsocks is that it is available for most ecosystems. Ofcourse it&rsquo;s available on the usual Linux, Mac and Windows, but there&rsquo;s also android phones and wifi routers! <sup id=fnref:3><a href=#fn:3 class=footnote-ref role=doc-noteref>3</a></sup> This means you don&rsquo;t need a PC to tunnel anymore!</p>
</li>
</ul>
<h3 id=setup>Setup</h3>
<p>Enough of the talk. Let&rsquo;s get some hands dirty.</p>
<p>I&rsquo;ll be using an android phone as the client and an ubuntu machine as the server. If you cannot arrange for a server, I&rsquo;d recommend renting one online. DigitalOcean lets you buy a decent server for as low as $5 per month. You can use <a href=https://m.do.co/c/ad1b7e083b2e>this link</a> while signing up to get $10 in free credit.</p>
<h4 id=ubuntu>Ubuntu</h4>
<p>I&rsquo;ll be setting up the server now. <sup id=fnref:4><a href=#fn:4 class=footnote-ref role=doc-noteref>4</a></sup> First, a little housekeeping.</p>
<div class=highlight><div style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4>
<table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0>
<pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td>
<td style=vertical-align:top;padding:0;margin:0;border:0;width:100%>
<pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>$ apt-get update
$ apt-get install python-pip
$ pip install shadowsocks
</code></pre></td></tr></table>
</div>
</div><p>Next, create a config file <code>/etc/shadowsocks.json</code> and paste this</p>
<div class=highlight><div style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4>
<table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0>
<pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span></code></pre></td>
<td style=vertical-align:top;padding:0;margin:0;border:0;width:100%>
<pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=color:#111>{</span>
 <span style=color:#f92672>&#34;server&#34;</span><span style=color:#111>:</span> <span style=color:#d88200>&#34;0.0.0.0&#34;</span><span style=color:#111>,</span>
 <span style=color:#f92672>&#34;server_port&#34;</span><span style=color:#111>:</span> <span style=color:#ae81ff>465</span><span style=color:#111>,</span>
 <span style=color:#f92672>&#34;local_port&#34;</span><span style=color:#111>:</span> <span style=color:#ae81ff>1080</span><span style=color:#111>,</span>
 <span style=color:#f92672>&#34;password&#34;</span><span style=color:#111>:</span> <span style=color:#d88200>&#34;secret&#34;</span><span style=color:#111>,</span>
 <span style=color:#f92672>&#34;timeout&#34;</span><span style=color:#111>:</span> <span style=color:#ae81ff>300</span><span style=color:#111>,</span>
 <span style=color:#f92672>&#34;method&#34;</span><span style=color:#111>:</span> <span style=color:#d88200>&#34;aes-256-cfb&#34;</span>
<span style=color:#111>}</span>
</code></pre></td></tr></table>
</div>
</div><p>There are some things worth looking out here.</p>
<ul>
<li>Setting <code>server</code> to <code>0.0.0.0</code> essentially means that you&rsquo;re making shadowsocks accessible from outside the machine as well. <code>server_port</code> simply specifies the port over which shadowsocks would be accessible. So, if the server&rsquo;s public IP is <code>11.22.33.44</code>, shadowsocks is accessible on <code>11.22.33.44:465</code> according to the configuration above.</li>
<li>Also, make sure that <code>server_port</code>, which is 465 in this case, isn&rsquo;t blocked on your home network. <sup id=fnref:5><a href=#fn:5 class=footnote-ref role=doc-noteref>5</a></sup> Else you wouldn&rsquo;t be able to connect to the server in the first place.</li>
<li>It turns out that you shouldn&rsquo;t use the common HTTP ports like 80 and 443 for shadowsocks. Atleast they didn&rsquo;t work out for me.</li>
</ul>
<p>You don&rsquo;t need to bother about other options for now. Just keep note of the password, we&rsquo;ll be using that later. Next, you need to run shadowsocks in the background.</p>
<div class=highlight><div style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4>
<table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0>
<pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td>
<td style=vertical-align:top;padding:0;margin:0;border:0;width:100%>
<pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>$ ssserver -c /etc/shadowsocks.json -d start
</code></pre></td></tr></table>
</div>
</div><p>Once a client is connected, you can check the logs in <code>/var/log/shadowsocks.log</code> to confirm that it&rsquo;s actually working. There! Halfway done.</p>
<h4 id=android>Android</h4>
<p>Coming to the client, setting up shadowsocks for android is a piece of cake. Just install the <a href="https://play.google.com/store/apps/details?id=com.github.shadowsocks">shadowsocks android app</a>, and enter the <code>remote port</code>, <code>local port</code>, <code>encryption method</code> and <code>password</code> according to the config file you just created on the server. Enter your server&rsquo;s public IP <sup id=fnref:6><a href=#fn:6 class=footnote-ref role=doc-noteref>6</a></sup> in place of the <code>server</code> option, and you&rsquo;re ready to hit the connect button.</p>
<p>An interesting option here is to selectively use shadowsocks for only some applications instead of a global proxy using the <code>per app proxy</code> setting. This works well if you only have a few apps that need tunnelling.</p>
<p>There! you can now enjoy unrestricted internet, even on your phone!
Visit the <a href=https://github.com/shadowsocks/shadowsocks/wiki>shadowsocks wiki</a> page to find more about configuration options, optimization, and more advanced features.</p>
<section class=footnotes role=doc-endnotes>
<hr>
<ol>
<li id=fn:1 role=doc-endnote>
<p>The Great Firewall of China&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p>
</li>
<li id=fn:2 role=doc-endnote>
<p>Inspired by James Swineson&rsquo;s <a href=https://www.quora.com/What-is-shadowsocks/answer/James-Swineson>answer</a> on Quora&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p>
</li>
<li id=fn:3 role=doc-endnote>
<p>Shadowsocks is also available for routers running OpenWRT&#160;<a href=#fnref:3 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p>
</li>
<li id=fn:4 role=doc-endnote>
<p>VPNDada has a good <a href=https://www.vpndada.com/how-to-setup-a-shadowsocks-server-on-digitalocean/>step by step tutorial</a> on setting up shadowsocks on a <a href=https://m.do.co/c/ad1b7e083b2e>digitalocean droplet</a> from scratch.&#160;<a href=#fnref:4 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p>
</li>
<li id=fn:5 role=doc-endnote>
<p>Here&rsquo;s a nice resource to help you <a href=http://nikhilweee.me/reference/#test-outgoing-ports>test open ports</a>.&#160;<a href=#fnref:5 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p>
</li>
<li id=fn:6 role=doc-endnote>
<p>You could also enter a domain instead of an IP if you have one set up.&#160;<a href=#fnref:6 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p>
</li>
</ol>
</section>
</div>
<div id=disqus_thread></div>
<script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return}var b=document,a=b.createElement('script');a.async=!0,a.src='//nikhilweee.disqus.com/embed.js',a.setAttribute('data-timestamp',+new Date),(b.head||b.body).appendChild(a)})()</script>
<noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript>
<a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a>
</article>
</div>
</main>
<footer class=site-footer>
<div class=wrapper>
<p>
&copy; 2022 Nikhil Verma • Subscribe via <a href=/feed.xml>RSS</a>
</p>
</div>
</footer>
</body>
<script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark'),document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script>
</html>