<!doctype html><!-- begin: layouts/_default/baseof.html --><html lang=en><!-- begin: layouts/partials/head.html --><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.100.1"><title>Shadowsocks - weeeblog</title><link rel=icon type=image/svg href=/static/favicon.png><link rel=stylesheet type=text/css href=/main.css><link rel=canonical href=https://nikhilweee.me/blog/2016/shadowsocks/><link href=https://cdn.jsdelivr.net/npm/charter-webfont/charter.min.css rel=stylesheet><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css></head><!-- end: layouts/partials/head.html --><body class=flex-parent><div class="sidebar sidebar-left"></div><main class=flex-content><!-- begin: layouts/partials/header.html --><div class=wrapper><header class=site-header><nav class=site-title><a href=/blog><strong>weeeblog</strong></a></nav><nav class=site-nav><a href=/>About</a>
<a href=/blog/>Blog</a>
<a href=/blog/archives>Archives</a></nav><nav class=site-toggle><a id=theme-toggle><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></a></nav></header></div><!-- end: layouts/partials/header.html --><div class="page-content wrapper"><!-- begin: layouts/_default/single.html --><article class=post itemscope itemtype=http://schema.org/BlogPosting><header class=post-header><h1 class=post-title itemprop="name headline">Shadowsocks</h1><p class=post-subtitle itemprop="abstract description">Dont let your ISP block you</p><p class=post-meta><time datetime="2016-09-12 00:00:00 +0000 UTC" itemprop=datePublished>Published Sep 12, 2016</time>
• <time datetime="2016-09-12 00:00:00 +0000 UTC" itemprop=datePublished>Updated Feb 14, 2022</time><br><a href=/blog/archives/tutorials/>Tutorials</a></p></header><div class=post-content itemprop=articleBody><p><a href=https://shadowsocks.org/>Shadowsocks</a>! Sounds like the new superhero after <em>Deadpool</em>. Well, in a way it <em>is</em> a superhero! It let&rsquo;s you bypass censorship, even the GFW! <sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup> Okay, so what&rsquo;s this fuss about? Before going further, I think it needs some introduction.</p><blockquote><p>Shadowsocks is a SOCKS5 compatible proxy server/client suite which excels at being undetectable. It leaves no fingerprint even when you use deep packet inspection. <sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup></p></blockquote><p>Whoa! Wait, What does that mean? In simple terms, this means that shadowsocks lets you access blocked resources and is hard to detect by even the best firewalls.</p><p><em>Seems Interesting. I would definitely want one!</em><br>Okay, but before moving further, it&rsquo;s important to know how this stuff works.</p><h3 id=working>Working</h3><p>Shadowsocks is some software that has to be set up individually on two systems. One is your device, or the <em>client</em>, which wants to bypass firewalls, and the other is a <em>server</em> - quite simply a device which has unrestricted access to the internet.<br>The client then connects to the server (which isn&rsquo;t blocked by the firewall), and tunnels all its traffic through the server via shadowsocks. The firewall thinks this is legitimate traffic, and so doesn&rsquo;t block you.</p><figure><img src=/static/shadowsocks/arch.svg alt="The Big Picture."><figcaption><p>The Big Picture.</p></figcaption></figure><h3 id=why-shadowsocks>Why Shadowsocks</h3><p>Now you might think that if the client is already allowed to connect to the server, then why do we need shadowsocks in the first place?
There are a couple of reasons why I recommend shadowsocks.</p><ul><li><p>One, although you may have unrestricted access to the server, the firewall can still find out whether you&rsquo;re using it to tunnel blocked resources. Shadowsocks excels at deceiving. It fools the firewall into believing that your communication is legitimate. Also, it&rsquo;s fast. Trust me. You&rsquo;re not limited by some crappy VPN that only lets through a few kilobits per second.</p></li><li><p>Two, an interesting advantage with shadowsocks is that it is available for most ecosystems. Ofcourse it&rsquo;s available on the usual Linux, Mac and Windows, but there&rsquo;s also android phones and wifi routers! <sup id=fnref:3><a href=#fn:3 class=footnote-ref role=doc-noteref>3</a></sup> This means you don&rsquo;t need a PC to tunnel anymore!</p></li></ul><h3 id=setup>Setup</h3><p>Enough of the talk. Let&rsquo;s get some hands dirty.</p><p>I&rsquo;ll be using an android phone as the client and an ubuntu machine as the server. If you cannot arrange for a server, I&rsquo;d recommend renting one online. DigitalOcean lets you buy a decent server for as low as $5 per month. You can use <a href=https://m.do.co/c/ad1b7e083b2e>this link</a> while signing up to get $10 in free credit.</p><h4 id=ubuntu>Ubuntu</h4><p>I&rsquo;ll be setting up the server now. <sup id=fnref:4><a href=#fn:4 class=footnote-ref role=doc-noteref>4</a></sup> First, a little housekeeping.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>$ apt-get update
</span></span><span class=line><span class=cl>$ apt-get install python-pip
</span></span><span class=line><span class=cl>$ pip install shadowsocks
</span></span></code></pre></div><p>Next, create a config file <code>/etc/shadowsocks.json</code> and paste this</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl> <span class=nt>&#34;server&#34;</span><span class=p>:</span> <span class=s2>&#34;0.0.0.0&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl> <span class=nt>&#34;server_port&#34;</span><span class=p>:</span> <span class=mi>465</span><span class=p>,</span>
</span></span><span class=line><span class=cl> <span class=nt>&#34;local_port&#34;</span><span class=p>:</span> <span class=mi>1080</span><span class=p>,</span>
</span></span><span class=line><span class=cl> <span class=nt>&#34;password&#34;</span><span class=p>:</span> <span class=s2>&#34;secret&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl> <span class=nt>&#34;timeout&#34;</span><span class=p>:</span> <span class=mi>300</span><span class=p>,</span>
</span></span><span class=line><span class=cl> <span class=nt>&#34;method&#34;</span><span class=p>:</span> <span class=s2>&#34;aes-256-cfb&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>There are some things worth looking out here.</p><ul><li>Setting <code>server</code> to <code>0.0.0.0</code> essentially means that you&rsquo;re making shadowsocks accessible from outside the machine as well. <code>server_port</code> simply specifies the port over which shadowsocks would be accessible. So, if the server&rsquo;s public IP is <code>11.22.33.44</code>, shadowsocks is accessible on <code>11.22.33.44:465</code> according to the configuration above.</li><li>Also, make sure that <code>server_port</code>, which is 465 in this case, isn&rsquo;t blocked on your home network. <sup id=fnref:5><a href=#fn:5 class=footnote-ref role=doc-noteref>5</a></sup> Else you wouldn&rsquo;t be able to connect to the server in the first place.</li><li>It turns out that you shouldn&rsquo;t use the common HTTP ports like 80 and 443 for shadowsocks. Atleast they didn&rsquo;t work out for me.</li></ul><p>You don&rsquo;t need to bother about other options for now. Just keep note of the password, we&rsquo;ll be using that later. Next, you need to run shadowsocks in the background.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>$ ssserver -c /etc/shadowsocks.json -d start
</span></span></code></pre></div><p>Once a client is connected, you can check the logs in <code>/var/log/shadowsocks.log</code> to confirm that it&rsquo;s actually working. There! Halfway done.</p><h4 id=android>Android</h4><p>Coming to the client, setting up shadowsocks for android is a piece of cake. Just install the <a href="https://play.google.com/store/apps/details?id=com.github.shadowsocks">shadowsocks android app</a>, and enter the <code>remote port</code>, <code>local port</code>, <code>encryption method</code> and <code>password</code> according to the config file you just created on the server. Enter your server&rsquo;s public IP <sup id=fnref:6><a href=#fn:6 class=footnote-ref role=doc-noteref>6</a></sup> in place of the <code>server</code> option, and you&rsquo;re ready to hit the connect button.</p><p>An interesting option here is to selectively use shadowsocks for only some applications instead of a global proxy using the <code>per app proxy</code> setting. This works well if you only have a few apps that need tunnelling.</p><p>There! you can now enjoy unrestricted internet, even on your phone!
Visit the <a href=https://github.com/shadowsocks/shadowsocks/wiki>shadowsocks wiki</a> page to find more about configuration options, optimization, and more advanced features.</p><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p>The Great Firewall of China&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2><p>Inspired by James Swineson&rsquo;s <a href=https://www.quora.com/What-is-shadowsocks/answer/James-Swineson>answer</a> on Quora&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:3><p>Shadowsocks is also available for routers running OpenWRT&#160;<a href=#fnref:3 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:4><p>VPNDada has a good <a href=https://www.vpndada.com/how-to-setup-a-shadowsocks-server-on-digitalocean/>step by step tutorial</a> on setting up shadowsocks on a <a href=https://m.do.co/c/ad1b7e083b2e>digitalocean droplet</a> from scratch.&#160;<a href=#fnref:4 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:5><p>Here&rsquo;s a nice resource to help you <a href=http://nikhilweee.me/reference/#test-outgoing-ports>test open ports</a>.&#160;<a href=#fnref:5 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:6><p>You could also enter a domain instead of an IP if you have one set up.&#160;<a href=#fnref:6 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></div></article><!-- end: layouts/_default/single.html --></div><!-- begin: layouts/partials/footer.html --><div class=wrapper><div class=giscus></div></div><footer class=site-footer><div class=wrapper><p>&copy; 2022 <a href=/>Nikhil Verma</a> • Subscribe via <a href=/feed.xml>RSS</a></p></div></footer><!-- end: layouts/partials/footer.html --></main><div class="sidebar sidebar-right"><aside class=sidebar-toc><h1>Outline</h1><nav id=TableOfContents><ul><li><ul><li><ul><li><a href=#working>Working</a></li><li><a href=#why-shadowsocks>Why Shadowsocks</a></li><li><a href=#setup>Setup</a></li></ul></li></ul></li></ul></nav></aside></div></body><script type=text/javascript>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark'),document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light'),changeGiscusTheme()):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'),changeGiscusTheme())});function changeGiscusTheme(){let t=localStorage.getItem("pref-theme"),n={setConfig:{theme:t}},e=document.querySelector('iframe.giscus-frame');e&&e.contentWindow.postMessage({giscus:n},'https://giscus.app')}function handleMessage(e){if(e.origin!=='https://giscus.app')return;if(typeof e.data!='object'||!e.data.giscus)return;const t=e.data.giscus;changeGiscusTheme()}window.addEventListener('message',handleMessage)</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-0JVB0SEFDJ"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-0JVB0SEFDJ',{anonymize_ip:!1})}</script><script src=https://giscus.app/client.js data-repo=nikhilweee/nikhilweee.github.io data-repo-id="MDEwOlJlcG9zaXRvcnkzOTU5NjUwNTc=" data-category=Comments data-category-id=DIC_kwDOF5nygc4COpdc data-mapping=pathname data-reactions-enabled=1 data-emit-metadata=0 data-input-position=top data-theme=preferred_color_scheme data-lang=en crossorigin=anonymous async></script><!-- end: layouts/_default/baseof.html --></html>